{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex\\\\Desktop\\\\empatica\\\\empatica_delivery\\\\client\\\\components\\\\Downloads.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/****\r\n * Component in charge of retrieving the data from the database and in showing the interactive map with the tags\r\n * refering to the geographical position where the download was registered\r\n */\nimport React, { Component, Fragment } from 'react';\nimport ReactMapGL, { Marker } from 'react-map-gl'; // the map\n\nimport Nation from './Nation';\nimport gpl from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport DownloadTime from './DownloadTime'; //The query for the GraphQL server\n\nconst DOWNLOADS_QUERY = gpl`\n  query DownloadsQuery {\n    downloads\n    {\n        app_id\n        longitude\n        latitude\n        downloaded_at\n    }\n  }\n`;\nexport class Downloads extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      viewport: {\n        width: '30vw',\n        height: '90vh',\n        latitude: 45.464203,\n        longitude: 9.189982,\n        zoom: 5\n      }\n    });\n  }\n\n  render() {\n    return __jsx(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, __jsx(Query, {\n      query: DOWNLOADS_QUERY,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, ({\n      loading,\n      error,\n      data\n    }) => {\n      // If data are still loading\n      if (loading) return __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 37\n        }\n      }, \"Loading ....\"); // In the case of error ind querying the database \n\n      if (error) console.log(error);\n\n      if (data.downloads != null) {\n        return __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 37\n          }\n        }, __jsx(\"div\", {\n          className: \"col-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 41\n          }\n        }, __jsx(ReactMapGL, _extends({\n          mapStyle: \"mapbox://styles/mapbox/streets-v9\",\n          mapboxApiAccessToken: \"pk.eyJ1IjoiYWxleGVuYXgiLCJhIjoiY2tiMmVmZ2I4MDZ6dTJ1czBwYnpqOGtxcCJ9.IBNl_OPjhbhwcMbTycNL3w\",\n          mapStyle: \"mapbox://styles/alexenax/ckb2fqmm606pj1ir103dxqxdc\",\n          onViewportChange: viewport => this.setState({\n            viewport\n          })\n        }, this.state.viewport, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 45\n          }\n        }), data.downloads.map(download => __jsx(Marker, {\n          key: download.app_id,\n          latitude: download.latitude,\n          longitude: download.longitude,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 73\n          }\n        }, __jsx(\"img\", {\n          src: \"https://www.empatica.com/assets/images/homepage/empatica_red_heart-icn.svg\",\n          alt: \"Home Icon\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 77\n          }\n        }))))), __jsx(\"div\", {\n          className: \"col-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 37\n          }\n        }, __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 41\n          }\n        }, __jsx(\"div\", {\n          className: \"col-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 45\n          }\n        }, __jsx(Nation, {\n          data: data,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 49\n          }\n        }))), __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 41\n          }\n        }, __jsx(\"div\", {\n          className: \"col-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 45\n          }\n        }, __jsx(DownloadTime, {\n          data: data,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 50\n          }\n        })))));\n      } else {\n        return;\n\n        __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 37\n          }\n        }, \"No data found!\");\n      }\n    }));\n  }\n\n}\nexport default Downloads;","map":{"version":3,"sources":["C:/Users/Alex/Desktop/empatica/empatica_delivery/client/components/Downloads.js"],"names":["React","Component","Fragment","ReactMapGL","Marker","Nation","gpl","Query","DownloadTime","DOWNLOADS_QUERY","Downloads","viewport","width","height","latitude","longitude","zoom","render","loading","error","data","console","log","downloads","setState","state","map","download","app_id"],"mappings":";;;;;;;AAAA;;;;AAIA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,OAAOC,UAAP,IAAoBC,MAApB,QAAiC,cAAjC,C,CAAiD;;AACjD,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAAQC,KAAR,QAAoB,cAApB;AACA,OAAOC,YAAP,MAAyB,gBAAzB,C,CAEA;;AACA,MAAMC,eAAe,GAAGH,GAAI;;;;;;;;;;CAA5B;AAYA,OAAO,MAAMI,SAAN,SAAwBT,SAAxB,CAAkC;AAAA;AAAA;;AAAA,mCAG7B;AACAU,MAAAA,QAAQ,EAAE;AACVC,QAAAA,KAAK,EAAE,MADG;AAEVC,QAAAA,MAAM,EAAE,MAFE;AAGVC,QAAAA,QAAQ,EAAE,SAHA;AAIVC,QAAAA,SAAS,EAAE,QAJD;AAKVC,QAAAA,IAAI,EAAE;AALI;AADV,KAH6B;AAAA;;AAcrCC,EAAAA,MAAM,GAAG;AAEL,WACI,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,KAAD;AAAO,MAAA,KAAK,EAAGR,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,CAAC;AAACS,MAAAA,OAAD;AAAUC,MAAAA,KAAV;AAAiBC,MAAAA;AAAjB,KAAD,KAA4B;AAExB;AACA,UAAGF,OAAH,EAAY,OACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADI,CAHY,CAMxB;;AACA,UAAGC,KAAH,EAAUE,OAAO,CAACC,GAAR,CAAYH,KAAZ;;AAEV,UAAGC,IAAI,CAACG,SAAL,IAAkB,IAArB,EACA;AACA,eAAQ;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEI,MAAC,UAAD;AACI,UAAA,QAAQ,EAAC,mCADb;AAEI,UAAA,oBAAoB,EAAC,4FAFzB;AAGI,UAAA,QAAQ,EAAC,oDAHb;AAII,UAAA,gBAAgB,EAAGZ,QAAD,IAAc,KAAKa,QAAL,CAAc;AAAEb,YAAAA;AAAF,WAAd;AAJpC,WAKQ,KAAKc,KAAL,CAAWd,QALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAQIS,IAAI,CAACG,SAAL,CAAeG,GAAf,CAAmBC,QAAQ,IAEH,MAAC,MAAD;AAAQ,UAAA,GAAG,EAAEA,QAAQ,CAACC,MAAtB;AACQ,UAAA,QAAQ,EAAED,QAAQ,CAACb,QAD3B;AAEQ,UAAA,SAAS,EAAEa,QAAQ,CAACZ,SAF5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAII;AAAK,UAAA,GAAG,EAAC,4EAAT;AAAsF,UAAA,GAAG,EAAC,WAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJJ,CAFxB,CARJ,CAFJ,CADJ,EAwBA;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,MAAC,MAAD;AAAQ,UAAA,IAAI,EAAIK,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADJ,CADJ,EAMI;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACK,MAAC,YAAD;AAAc,UAAA,IAAI,EAAIA,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADL,CADJ,CANJ,CAxBA,CAAR;AAsCG,OAxCH,MA0CA;AACI;;AAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ;AAGH;AACJ,KA3DT,CADJ,CADJ;AAkEH;;AAlFoC;AAqFzC,eAAeV,SAAf","sourcesContent":["/****\r\n * Component in charge of retrieving the data from the database and in showing the interactive map with the tags\r\n * refering to the geographical position where the download was registered\r\n */\r\nimport React, { Component, Fragment} from 'react';\r\nimport ReactMapGL, {Marker} from 'react-map-gl'; // the map\r\nimport Nation from './Nation';\r\nimport gpl from 'graphql-tag';\r\nimport {Query} from 'react-apollo';\r\nimport DownloadTime from './DownloadTime';\r\n\r\n//The query for the GraphQL server\r\nconst DOWNLOADS_QUERY = gpl`\r\n  query DownloadsQuery {\r\n    downloads\r\n    {\r\n        app_id\r\n        longitude\r\n        latitude\r\n        downloaded_at\r\n    }\r\n  }\r\n`;\r\n\r\nexport class Downloads extends Component {\r\n\r\n    // Initial state fo the interactive map\r\n    state = {\r\n            viewport: {\r\n            width: '30vw',\r\n            height: '90vh',\r\n            latitude: 45.464203,\r\n            longitude: 9.189982,\r\n            zoom: 5\r\n        }\r\n\r\n    };\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Fragment>\r\n                <Query query= {DOWNLOADS_QUERY}>\r\n                    {\r\n                        ({loading, error, data}) => {\r\n                            \r\n                            // If data are still loading\r\n                            if(loading) return (\r\n                                    <p>Loading ....</p>);\r\n\r\n                            // In the case of error ind querying the database \r\n                            if(error) console.log(error);\r\n                            \r\n                            if(data.downloads != null)\r\n                            {\r\n                            return (<div className=\"row\">\r\n                                        <div className=\"col-6\">\r\n                                        \r\n                                            <ReactMapGL\r\n                                                mapStyle=\"mapbox://styles/mapbox/streets-v9\"\r\n                                                mapboxApiAccessToken=\"pk.eyJ1IjoiYWxleGVuYXgiLCJhIjoiY2tiMmVmZ2I4MDZ6dTJ1czBwYnpqOGtxcCJ9.IBNl_OPjhbhwcMbTycNL3w\"\r\n                                                mapStyle=\"mapbox://styles/alexenax/ckb2fqmm606pj1ir103dxqxdc\"\r\n                                                onViewportChange={(viewport) => this.setState({ viewport })}\r\n                                                {...this.state.viewport}\r\n                                            >\r\n                                            {\r\n                                                data.downloads.map(download => (\r\n                                                    \r\n                                                                        <Marker key={download.app_id} \r\n                                                                                latitude={download.latitude}\r\n                                                                                longitude={download.longitude}\r\n                                                                        >\r\n                                                                            <img src=\"https://www.empatica.com/assets/images/homepage/empatica_red_heart-icn.svg\" alt=\"Home Icon\"></img>\r\n                                                                        </Marker>\r\n                                                                    ))\r\n                                            }\r\n                                    \r\n                                        </ReactMapGL>\r\n                                    </div>\r\n                                    <div className=\"col-6\">\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col-12\">\r\n                                                <Nation data = {data}/> \r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col-12\">\r\n                                                 <DownloadTime data = {data}/>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            );}\r\n                            else\r\n                            {\r\n                                return\r\n                                (\r\n                                    <div>No data found!</div>\r\n                                                                    )\r\n                            }\r\n                        }\r\n                    }\r\n                </Query>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Downloads\r\n"]},"metadata":{},"sourceType":"module"}